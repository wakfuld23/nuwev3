var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,s=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&o(e,a,t[a]);if(n)for(var a of n(t))r.call(t,a)&&o(e,a,t[a]);return e},c=(e,n)=>t(e,a(n));import{R as m,a as i,b as u,r as p,L as d,c as E,d as h,I as g,B as _,S as v,e as b}from"./vendor.ba732470.js";const N=({children:e,isAuthenticated:t})=>m.createElement(i,{render:({location:a})=>t?e:m.createElement(u,{to:{pathname:"/login"}})}),y=p.exports.createContext({isAuth:!0,user:null,handleLogin:()=>{},handleLogout:()=>{}}),f=e=>{const[t,a]=p.exports.useState(!!localStorage.getItem("NUWE_TKN")),[n,l]=p.exports.useState(null);return m.createElement(y.Provider,{value:{isAuth:t,user:n,handleLogin:e=>{localStorage.setItem("NUWE_TKN",`Bearer ${e.token}`),l(null==e?void 0:e.user),a(!0)},handleLogout:()=>{localStorage.removeItem("NUWE_TKN"),a(!1)}}},e.children)};var x="_header_ix18c_1";const C=()=>{const{isAuth:e,handleLogout:t}=p.exports.useContext(y);return m.createElement("header",{className:x},m.createElement(d,{to:"/"},m.createElement("h3",null,m.createElement("i",{className:"fab fa-github-alt"}))),m.createElement("nav",null,m.createElement("ul",null,m.createElement("li",null,m.createElement(d,{to:"/credits",target:"_blank"},"Credits")),e&&m.createElement("li",null,m.createElement(d,{to:"login",onClick:t},"Logout")),m.createElement("li",null,m.createElement("a",{href:"https://github.com/abelfubu",target:"_blank"},m.createElement("i",{className:"fab fa-github-alt"}))),m.createElement("li",null,m.createElement("a",{href:"https://www.linkedin.com/in/abelfubu/",target:"_blank"},m.createElement("i",{className:"fab fa-linkedin"}))),m.createElement("li",null,m.createElement("a",{href:"https://twitter.com/abelfubu",target:"_blank"},m.createElement("i",{className:"fab fa-twitter-square"}))))))};var w="_button_awplq_1";const k=({onClick:e,children:t})=>m.createElement("button",{className:w,onClick:e},t);var S="_label_okhk2_1",j="_input_okhk2_5";const T=({type:e,onChange:t,value:a,name:n,label:l})=>m.createElement(m.Fragment,null,m.createElement("label",{className:S,htmlFor:l},l),m.createElement("input",{className:j,type:e,onChange:t,name:n,value:a,id:l}));var A={backdrop:"_backdrop_ea4o0_1",modal:"_modal_ea4o0_11","slide-down":"_slide-down_ea4o0_1"};const I=({onClose:e})=>m.createElement("div",{className:A.backdrop,onClick:e}),O=({children:e})=>m.createElement("div",{className:A.modal},m.createElement("div",{className:A.content},e)),P=document.getElementById("overlays"),z=({children:e,onClose:t})=>m.createElement("div",null,E.exports.createPortal(m.createElement(I,{onClose:t}),P),E.exports.createPortal(m.createElement(O,null,e),P)),L=({onSubmit:e})=>{const{user:t}=p.exports.useContext(y),[a,n]=p.exports.useState({author:t._id,name:"",description:"",language:""}),l=e=>{const{name:t,value:a}=e.target;n((e=>c(s({},e),{[t]:a})))};return m.createElement("form",{onSubmit:t=>{t.preventDefault(),e(a)}},m.createElement("h1",null,"Add Repository"),m.createElement(T,{type:"text",name:"name",label:"Name",onChange:l,value:a.name}),m.createElement(T,{type:"text",name:"description",label:"Description",onChange:l,value:a.description}),m.createElement(T,{type:"text",name:"language",label:"Language",onChange:l,value:a.language}),m.createElement(k,null,"ADD"))};var D="_link_fvor7_1",U="_repoCard_fvor7_13",R="_language_fvor7_31",q="_repoId_fvor7_35";const V=({repo:e})=>m.createElement("a",{className:D,href:e.url,target:"_blank"},m.createElement("div",{className:U},m.createElement("h3",null,e.name),e.stack.length&&e.stack.map(((e,t)=>m.createElement("p",{key:t,className:R},e.toUpperCase()))),m.createElement("p",{className:q},"ID: ",e._id)));var K="_header_133cp_1",W="_grid_133cp_7";const G=({repos:e})=>m.createElement(m.Fragment,null,m.createElement("h2",{className:K},"Repos"),m.createElement("section",{className:W},e.map(((e,t)=>m.createElement(V,{key:t,repo:e})))));var F="_user_qcnqq_1",B="_img_qcnqq_27";const J=({children:e})=>{const{user:t}=p.exports.useContext(y);return m.createElement(m.Fragment,null,m.createElement("section",{className:F},m.createElement("div",{className:B},m.createElement("h6",null,null==t?void 0:t.username[0].toUpperCase())," "),m.createElement("div",{className:"content"},m.createElement("p",null,"ðŸ“™ Repositories"),m.createElement("h3",null,null==t?void 0:t.repos),m.createElement("p",null,"ðŸ¤Ÿ Name"),m.createElement("h3",null,null==t?void 0:t.username),m.createElement("p",null,"ðŸ’» Company"),m.createElement("h3",null,null==t?void 0:t.email))),e)},H=()=>{const{user:e}=p.exports.useContext(y),[t,a]=p.exports.useState((null==e?void 0:e.username)||""),[n,l]=p.exports.useState(!1),{payload:r,error:o}=(e=>{const{handleLogin:t}=p.exports.useContext(y),[a,n]=p.exports.useState(null),[l,r]=p.exports.useState(null),o=p.exports.useCallback((async e=>{try{const t=await fetch(e,{headers:{Authorization:localStorage.getItem("NUWE_TKN")||""}});return r(null),t.json()}catch(t){r(t)}}),[]);return p.exports.useEffect((()=>{const a=setTimeout((async()=>{if(!e){const e=localStorage.getItem("NUWE_TKN").split(" ")[1],a=await o("https://nuwe-htsv3-api.herokuapp.com/user");t({token:e,user:a.user})}}),400);return()=>clearTimeout(a)}),[e]),{payload:a,error:l}})(e),s=p.exports.useCallback((e=>{a(e.currentTarget.value)}),[]);return m.createElement("div",{className:"App"},m.createElement(T,{label:"Github's username",type:"text",onChange:s,value:t}),m.createElement(m.Fragment,null,(null==e?void 0:e.username)&&m.createElement(J,null,m.createElement(k,{onClick:()=>l(!0)},"+ Add Repo")),(null==r?void 0:r.length)&&m.createElement(G,{repos:r})),n&&m.createElement(z,{onClose:()=>l(!1)},m.createElement(L,{onSubmit:async e=>{l(!1);const t={name:e.name,description:e.description,stack:[e.language],author:e.author};await h.post("https://nuwe-htsv3-api.herokuapp.com/repository",t,{headers:{Authorization:localStorage.getItem("NUWE_TKN"),"Conten-type":"application/json"}})&&a("")}})))};var M="_header_1cyfd_1",$="_login_1cyfd_8",Q="_form_1cyfd_14";const X=({history:e})=>{const{handleLogin:t}=p.exports.useContext(y),[a,n]=p.exports.useState({email:"",password:""}),l=e=>{const{name:t,value:l}=e.target;n(c(s({},a),{[t]:l}))};return m.createElement("section",{className:$},m.createElement("form",{className:Q,onSubmit:async n=>{if(n.preventDefault(),a.email&&a.password)try{const n=await(async()=>{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},t=await fetch("https://nuwe-htsv3-api.herokuapp.com/signin",e);return await t.json()})();if(!(null==n?void 0:n.token))return;t(n),e.push("/")}catch(l){console.log(l)}}},m.createElement("h1",{className:M},"Login"),m.createElement(T,{label:"Email",value:a.email,type:"email",name:"email",onChange:l}),m.createElement(T,{label:"Password",value:a.password,type:"password",name:"password",onChange:l}),m.createElement(k,null,"LOGIN"),m.createElement(d,{to:"/register"},"Not registered yet - Go to sign up")))};var Y="_header_vao77_1",Z="_register_vao77_8",ee="_form_vao77_14",te="_button_vao77_23";const ae=({history:e})=>{p.exports.useContext(y);const[t,a]=p.exports.useState({email:"",password:"",username:""}),n=e=>{const{name:t,value:n}=e.target;a((e=>c(s({},e),{[t]:n})))};return m.createElement("section",{className:Z},m.createElement("form",{className:ee,onSubmit:async a=>{if(a.preventDefault(),t.email&&t.password&&t.username)try{return(await(async()=>{const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},a=await fetch("https://nuwe-htsv3-api.herokuapp.com/signup",e);return await a.json()})()).msg&&e.push("/login")}catch(n){console.log(n)}}},m.createElement("h1",{className:Y},"Register"),m.createElement(T,{label:"Email",value:t.email,type:"email",name:"email",onChange:n}),m.createElement(T,{label:"Username",value:t.username,type:"username",name:"username",onChange:n}),m.createElement(T,{label:"Password",value:t.password,type:"password",name:"password",onChange:n}),m.createElement("button",{className:te},"REGISTER"),m.createElement(d,{to:"/login"},"Already registered? - Go to sign in")))};const ne=({id:e,nombre:t,creditos:a})=>{const[n,l]=p.exports.useState({name:"",number:"",expiration:"",CVV:""}),r=e=>{const{name:t,value:a}=e.target;l((e=>c(s({},e),{[t]:a}))),console.log(n)};return m.createElement("div",{className:"container"},m.createElement("h1",{className:"text-center mt-sm-4 mb-sm-5 mt-3"},"Paga con Tarjeta"),m.createElement("div",{className:"row mt-sm-4 mt-3"},m.createElement("div",{className:"card col-sm-6 col-12 pt-sm-5 py-5 mb-4",style:{color:"black",backgroundColor:"lightgray"}},m.createElement("div",{className:"card-body text-black"},m.createElement("h5",null,"ID de compra ",e),m.createElement("h2",{className:"card-title"},"Has comprado: ",t),m.createElement("h3",{className:"card-text"},"Vale ",a," creditos."))),m.createElement("form",{id:"main-login",onSubmit:e=>{e.preventDefault(),fetch("",{headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})},className:"col-12 col-sm-6"},m.createElement("label",{className:"form-label"},"Nombre y Apellido del titular:"),m.createElement("input",{type:"text",className:"form-control",name:"name",onChange:r}),m.createElement("label",null,"NÃºmero de Tarjeta:"),m.createElement("input",{type:"text",className:"form-control",name:"number",onChange:r}),m.createElement("div",{className:"row"},m.createElement("div",{className:"col-sm-6 col-6"},m.createElement("label",null,"Vencimiento:"),m.createElement("input",{type:"text",className:"form-control",name:"expiration",onChange:r})),m.createElement("div",{className:"col-sm-6 col-6"},m.createElement("label",null,"CVV:"),m.createElement("input",{type:"text",className:"form-control",name:"CVV",onChange:r}))),m.createElement("button",{className:"btn btn-danger btn-block"},"Comprar"))))};var le="_containerRow_jz7z7_1",re="_containerColumn_jz7z7_14",oe="_grid_jz7z7_22",se="_elementos_jz7z7_29";const ce=()=>{const[e,t]=p.exports.useState(!1),[a,n]=p.exports.useState([{id:1,name:"Auriculares",credits:20,cantidad:50}]),[l,r]=p.exports.useState(0),[o,s]=p.exports.useState(""),[c,i]=p.exports.useState(0);let u;function d(a=0,n="",l=0){r(a),s(n),i(l),t(!e)}return p.exports.useEffect((()=>{(async()=>{console.log(1),await fetch("https://nuwe-htsv3-api.herokuapp.com/products",{method:"GET",headers:{Authorization:localStorage.getItem("NUWE_TKN")}}).then((e=>e.json())).then((e=>{console.log(e.products),n(e.products)})).catch((e=>console.log(e)))})()}),[]),a.length>1&&(u=a.map((e=>m.createElement("div",{key:e.id,className:se},m.createElement("div",null,m.createElement("h4",null,e.name),m.createElement("p",null,e.credits," creditos")),m.createElement("button",{onClick:()=>d(e.id,e.name,e.credits)},"comprar"))))),m.createElement("div",null,m.createElement("div",null),e&&m.createElement("div",{className:le},m.createElement("div",null,m.createElement(g,{onClick:()=>d(),size:32})),m.createElement(ne,{id:l.toString(),nombre:o,creditos:c.toString()})),!e&&m.createElement("div",{className:re},m.createElement("h1",null,"CANJEA TUS CREDITOS"),m.createElement("div",{className:oe},u)))};function me(){const{isAuth:e}=p.exports.useContext(y);return m.createElement(_,{basename:"/nuwev3"},m.createElement(C,null),m.createElement(v,null,m.createElement(i,{exact:!0,path:"/login",render:e=>m.createElement(X,s({},e))}),m.createElement(i,{exact:!0,path:"/register",render:e=>m.createElement(ae,s({},e))}),m.createElement(i,{exact:!0,path:"/credits",component:ce}),m.createElement(N,{isAuthenticated:e},m.createElement(i,{exact:!0,path:"/",component:H}))))}b.render(m.createElement(f,null,m.createElement(m.StrictMode,null,m.createElement(me,null))),document.getElementById("root"));
